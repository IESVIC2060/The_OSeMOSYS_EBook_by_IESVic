

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>IESVic OSeMOSYS Notebook &#8212; OSeMOSYS Energy Model for British Columbia - A Pythonic Implementation by IESVic</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Book_Files/_build/jupyter_execute/osemosys_notebook_version';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../../README.html">
  
  
  
  
  
    <p class="title logo__title">OSeMOSYS Energy Model for British Columbia - A Pythonic Implementation by IESVic</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../README.html">
                    The OSeMOSYS Ebook by IESVic
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../1_Introduction_to_Energy_Modelling_and_OSeMOSYS.html">1 Introduction to Energy Modelling and OSeMOSYS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../2_Introduction_to_Pyomo.html">2 Introduction to Pyomo</a></li>





<li class="toctree-l1"><a class="reference internal" href="../../3_The_OSeMOSYS_Model_in_Pyomo.html">3 The OSeMOSYS Model in Pyomo</a></li>





<li class="toctree-l1"><a class="reference internal" href="../../4_Model_Debugging.html">4 Model Debugging</a></li>





<li class="toctree-l1"><a class="reference internal" href="../../5_Final_Considerations.html">5 Final Considerations and Laying the Way Forward</a></li>



<li class="toctree-l1"><a class="reference internal" href="../../Appendix_A.html">Appendix A: A Brief Insight Into the AMPL Modeling Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Appendix_B.html">Appendix B: OSeMOSYS Storage Dynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Appendix_C.html">Appendix C: Model Development Timeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Appendix_D.html">Appendix D: Overview of CPLEX Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../osemosys_notebook_version.html">IESVic OSeMOSYS Notebook</a></li>







</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/IESVIC2060/The_OSeMOSYS_EBook_by_IESVic/blob/master/Book_Files/_build/jupyter_execute/osemosys_notebook_version.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/IESVIC2060/The_OSeMOSYS_EBook_by_IESVic" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/IESVIC2060/The_OSeMOSYS_EBook_by_IESVic/issues/new?title=Issue%20on%20page%20%2FBook_Files/_build/jupyter_execute/osemosys_notebook_version.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/Book_Files/_build/jupyter_execute/osemosys_notebook_version.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>IESVic OSeMOSYS Notebook</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">IESVic OSeMOSYS Notebook</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#table-of-contents">Table of Contents</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#important-information-for-exercises">Important Information for Exercises</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#initializations">Initializations</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#solving-the-model">Solving the Model</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-results">Visualizing Results</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise">Exercise</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#for-the-instructor">For the Instructor</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#for-the-students">For the Students</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#solve-the-model-again-with-altered-values">Solve the model again with altered values</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="iesvic-osemosys-notebook">
<h1>IESVic OSeMOSYS Notebook<a class="headerlink" href="#iesvic-osemosys-notebook" title="Permalink to this headline">#</a></h1>
<section id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">#</a></h2>
<ol class="arabic">
<li><p><span class="xref myst">Introduction</span></p></li>
<li><p><span class="xref myst">Important Information for Exercises</span></p></li>
<li><p><span class="xref myst">Initializations</span></p></li>
<li><p><span class="xref myst">Solving the Model</span></p></li>
<li><p><span class="xref myst">Visualizing Results</span></p></li>
<li><p><span class="xref myst">Exercise</span></p>
<p>6.1 <span class="xref myst">Instructor Controls</span></p>
<p>6.2 <span class="xref myst">Student Area</span></p>
</li>
</ol>
</section>
</section>
<hr class="docutils" />
<section class="tex2jax_ignore mathjax_ignore" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">#</a></h1>
<p>This notebook contains the OSeMOSYS framework for energy modelling with an implementation in Python, using the Pyomo module. This Jupyter file is best run using Google Colab. The flowchart below contains the workflow for this notebook.</p>
<p class="aligncenter">
<img align="middle" src="https://github.com/criscfer/Personal_Storage_Folder/blob/main/Images/OSeMOSYS_Notebook_flowchart.png?raw=true"/>
</p>
The table below contains the available linear solvers inside this notebook. For a more detailed explanation on using and installing different solvers inside Google Colab, see [this link](https://jckantor.github.io/ND-Pyomo-Cookbook/notebooks/01.02-Running-Pyomo-on-Google-Colab.html)
<table>
    <tr>
    <th>Solver</th>
    <th>Use</th>
    <th>Call inside Pyomo</th>
    </tr>
    <tr>
    <td class="solid"><a href="https://github.com/coin-or/Clp">COIN-OR Clp</a></td>
    <td class="solid">LP</td>
    <td class="solid"><em>opt = SolverFactory('clp')</em></td>
    </tr>
    <tr>
    <td class="solid"><a href="https://github.com/coin-or/Cbc">COIN-OR Cbc</a></td>
    <td class="solid">MILP</td>
    <td class="solid"><em>opt = SolverFactory('cbc')</em></td>
    </tr>
    <tr>
    <td class="solid"><a href="https://github.com/coin-or/Ipopt">COIN-OR Ipopt</a></td>
    <td class="solid">NLP</td>
    <td class="solid"><em>opt = SolverFactory('ipopt')</em></td>
    </tr>
    <tr>
    <td class="solid"><a href="https://github.com/coin-or/Bonmin">COIN-OR Bonmin</a></td>
    <td class="solid">MINLP</td>
    <td class="solid"><em>opt = SolverFactory('bonmin')</em></td>
    </tr>
    <tr>
    <td class="solid"><a href="https://github.com/coin-or/Couenne">COIN-OR Couenne</a></td>
    <td class="solid">Global MINLP</td>
    <td class="solid"><em>opt = SolverFactory('couenne')</em></td>
    </tr>
</table>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Installations for Google Collab - Uncomment if running through Collab

%%capture
import sys
import os

#!pip install pyomo
!pip install idaes-pse --pre
!idaes get-extensions --to ./bin 
os.environ[&#39;PATH&#39;] += &#39;:bin&#39;

##############################################################################

# Imports
from __future__ import division
from fileinput import filename
from pyomo.environ import *
from pyomo.core import *
from pyomo.opt import SolverFactory
import pandas as pd
import numpy as np
import math
import random
from Objective_Function import ObjectiveFunction_rule
from Model_Constraints import *
#from Model_Debugging_Tools import Variable_Frame
#from Model_Sel_Res import Selected_Results

import matplotlib.pyplot as plt
import plotly.express as px
import plotly.graph_objects as go
from plotly.subplots import make_subplots

</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>UsageError: Line magic function `%%capture` not found.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">Process_Data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">)</span> <span class="c1"># Transform dataframe into dictionary of lists</span>
    <span class="c1">#print(data)    </span>
    <span class="n">included</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;Included&#39;</span><span class="p">)</span> <span class="c1"># Get the &#39;Included&#39; column as a separate list (alternative way of achieving this: list(data.values())[0] )</span>
    <span class="n">value</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># Get parameter values as a separate list</span>
    <span class="k">if</span> <span class="n">component</span> <span class="o">==</span> <span class="s2">&quot;set&quot;</span><span class="p">:</span> <span class="c1"># Initialize sets</span>
        <span class="n">initializer</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">included</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Yes&quot;</span><span class="p">:</span>
                <span class="n">initializer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">component</span> <span class="o">==</span> <span class="s2">&quot;parameter&quot;</span><span class="p">:</span> <span class="c1"># Initialize parameters</span>
        <span class="n">initializer</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">sets</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">set_tuples</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">([</span><span class="n">i</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sets</span><span class="p">])</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]))]</span> <span class="c1"># Get sets indexing the parameter as tuples</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">included</span><span class="p">,</span> <span class="n">set_tuples</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="k">if</span><span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;No&#39;</span><span class="p">):</span>                <span class="k">continue</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">j</span><span class="p">):</span>
                <span class="n">initializer</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span>
    <span class="k">return</span> <span class="n">initializer</span>
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="important-information-for-exercises">
<h1>Important Information for Exercises<a class="headerlink" href="#important-information-for-exercises" title="Permalink to this headline">#</a></h1>
<p>If the notebook is being executed in exercise mode, you might need to re-run the initialization of a few parameters. This happens because, while Pyomo allows us to set some of the parameters as “mutable” to be changed in real time with the previous solution of the model still stored in memory, other parameters cannot be set as mutable if the constraints in which they are envolved are of a boolean nature.
A boolean constraint is one where the condition for the model remain within that boundary is of True vs False nature. This is not always the case, since in some occasion, it may be that the constraint is only assessing if a particular value is contained within numerical boundaries, and not necessarely if a condition is true, or not.</p>
<p>Some of the parameters which will not be mutable for the purposes of this model are the “efficiencies”, or the input and output <code class="docutils literal notranslate"><span class="pre">Activity</span> <span class="pre">Ratios</span></code>, and the <code class="docutils literal notranslate"><span class="pre">Specified</span> <span class="pre">Demand</span> <span class="pre">Profiles</span></code>. In order to change these parameters, set the <code class="docutils literal notranslate"><span class="pre">Exercise_Flag</span></code> to <strong>True</strong> and then select the scenario you wish to run by changing the <code class="docutils literal notranslate"><span class="pre">sheet_name</span></code> variable of the <code class="docutils literal notranslate"><span class="pre">read_excel</span></code> method from Pandas. These scenarios are different sheets from the amples Excel files provided.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># File paths inside Google Colab&#39;s main folder</span>

<span class="n">sets_file</span> <span class="o">=</span> <span class="s2">&quot;/content/Sets_toy_model.xlsx&quot;</span>
<span class="n">parameters_file</span> <span class="o">=</span> <span class="s2">&quot;/content/Param_toy_model.xlsx&quot;</span>


<span class="c1"># Activity Ratio files - to be used in exercises (set flag to True and re-run the model when using these files)</span>
<span class="n">Exercise_Flag</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">if</span> <span class="n">Exercise_Flag</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Which scenario (from 1 to 5) would you like to select? &quot;</span><span class="p">)</span>
    <span class="n">select_IAR</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;For the input activity ratios (1 is the default scenario): &quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">select_IAR</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">or</span> <span class="nb">float</span><span class="p">(</span><span class="n">select_IAR</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No input activity ratio for scenario &quot;</span> <span class="o">+</span> <span class="n">select_IAR</span><span class="p">)</span>
    <span class="n">select_SDP</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;For the specified demand profile (1 is the default scenario): &quot;</span><span class="p">)</span> 
    <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">select_SDP</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">or</span> <span class="nb">float</span><span class="p">(</span><span class="n">select_SDP</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No specified demand profile for scenario &quot;</span> <span class="o">+</span> <span class="n">select_SDP</span><span class="p">)</span>
    <span class="n">IAR_exercise</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;/content/Input_Activity_Ratio_Samples.xlsx&quot;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;IAR_Sample&quot;</span><span class="o">+</span><span class="n">select_IAR</span><span class="p">))</span>
    <span class="n">SDP_exercise</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;/content/Demand_Profile_Samples.xlsx&quot;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;SDP_Sample&quot;</span><span class="o">+</span><span class="n">select_SDP</span><span class="p">))</span>




<span class="n">model</span> <span class="o">=</span> <span class="n">AbstractModel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;OSeMOSYS_IESVic&quot;</span><span class="p">)</span> <span class="c1"># Create model object and give it a name</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Which scenario (from 1 to 5) would you like to select? 
For the input activity ratios (1 is the default scenario): 3
For the specified demand profile (1 is the default scenario): 1
</pre></div>
</div>
</div>
</div>
</section>
<hr class="docutils" />
<section class="tex2jax_ignore mathjax_ignore" id="initializations">
<h1>Initializations<a class="headerlink" href="#initializations" title="Permalink to this headline">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;Dataframes:&#39;</span>
<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Sets&#39;</span>
<span class="n">YEAR_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">sets_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;YEAR&quot;</span><span class="p">))</span>
<span class="n">TECHNOLOGY_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">sets_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;TECHNOLOGY&quot;</span><span class="p">))</span>
<span class="n">TIMESLICE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">sets_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;TIMESLICE&quot;</span><span class="p">))</span>
<span class="n">FUEL_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">sets_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;FUEL&quot;</span><span class="p">,</span>  <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">EMISSION_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">sets_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;EMISSION&quot;</span><span class="p">))</span>
<span class="n">MODE_OF_OPERATION_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">sets_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;MODE_OF_OPERATION&quot;</span><span class="p">))</span>
<span class="n">REGION_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">sets_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;REGION&quot;</span><span class="p">))</span>
<span class="n">SEASON_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">sets_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;SEASON&quot;</span><span class="p">))</span>
<span class="n">DAYTYPE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">sets_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;DAYTYPE&quot;</span><span class="p">))</span>
<span class="n">DAILYTIMEBRACKET_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">sets_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;DAILYTIMEBRACKET&quot;</span><span class="p">))</span>
<span class="n">STORAGE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">sets_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;STORAGE&quot;</span><span class="p">))</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Parameters&#39;</span>    
    
<span class="s1">&#39;Global&#39;</span>
<span class="n">YEARSPLIT_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Year_Split&quot;</span><span class="p">))</span>
<span class="n">DISCOUNTRATE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Discount_Rate&quot;</span><span class="p">))</span>
<span class="n">DAYSPLIT_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Day_Split&quot;</span><span class="p">))</span>
<span class="n">CONVERSIONLS_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Conversionls&quot;</span><span class="p">))</span>
<span class="n">CONVERSIONLD_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Conversionld&quot;</span><span class="p">))</span>
<span class="n">CONVERSIONLH_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Conversionlh&quot;</span><span class="p">))</span>
<span class="n">DAYSINDAYTYPE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Days_In_Day_Type&quot;</span><span class="p">))</span>    
<span class="n">TRADEROUTE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Trade_Route&quot;</span><span class="p">))</span>
<span class="n">DEPRECIATIONMETHOD_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Depreciation_Method&quot;</span><span class="p">))</span>
    
<span class="s1">&#39;Demands&#39;</span>
<span class="n">SPECIFIEDANNUALDEMAND_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Specified_Annual_Demand&quot;</span><span class="p">))</span>
<span class="n">SPECIFIEDDEMANDPROFILE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Specified_Demand_Profile&quot;</span><span class="p">))</span>
<span class="n">ACCUMULATEDANNUALDEMAND_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Accumulated_Annual_Demand&quot;</span><span class="p">))</span>
    
<span class="s1">&#39;Performance&#39;</span>
<span class="n">CAPACITYTOACTIVITYUNIT_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Capacity_To_Activity_Unit&quot;</span><span class="p">))</span>
<span class="n">CAPACITYFACTOR_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Capacity_Factor&quot;</span><span class="p">))</span>
<span class="n">AVAILABILITYFACTOR_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Availability_Factor&quot;</span><span class="p">))</span>
<span class="n">OPERATIONALLIFE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Operational_Life&quot;</span><span class="p">))</span>
<span class="n">RESIDUALCAPACITY_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Residual_Capacity&quot;</span><span class="p">))</span>
<span class="n">INPUTACTIVITYRATIO_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Input_Activity_Ratio&quot;</span><span class="p">))</span>
<span class="n">OUTPUTACTIVITYRATIO_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Output_Activity_Ratio&quot;</span><span class="p">))</span>

<span class="s1">&#39;Technology Costs&#39;</span>
<span class="n">CAPITALCOST_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Capital_Cost&quot;</span><span class="p">))</span>
<span class="n">VARIABLECOST_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Variable_Cost&quot;</span><span class="p">))</span>
<span class="n">FIXEDCOST_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Fixed_Cost&quot;</span><span class="p">))</span>

<span class="s1">&#39;Storage&#39;</span>
<span class="n">TECHNOLOGYTOSTORAGE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Technology_To_Storage&quot;</span><span class="p">))</span>
<span class="n">TECHNOLOGYFROMSTORAGE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Technology_From_Storage&quot;</span><span class="p">))</span>
<span class="n">STORAGELEVELSTART_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Storage_Level_Start&quot;</span><span class="p">))</span>
<span class="s1">&#39;Adding storage level finish&#39;</span>
<span class="n">STORAGELEVELFINISH_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Storage_Level_Finish&quot;</span><span class="p">))</span>
<span class="n">STORAGEMAXCHARGERATE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Storage_Max_Charge_Rate&quot;</span><span class="p">))</span>
<span class="n">STORAGEMAXDISCHARGERATE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Storage_Max_Discharge_Rate&quot;</span><span class="p">))</span>
<span class="n">MINSTORAGECHARGE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Min_Storage_Charge&quot;</span><span class="p">))</span>
<span class="n">OPERATIONALLIFESTORAGE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;OperationalLife_Storage&quot;</span><span class="p">))</span>
<span class="n">CAPITALCOSTSTORAGE_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Capital_Cost_Storage&quot;</span><span class="p">))</span>
<span class="n">RESIDUALSTORAGECAPACITY_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Residual_Storage_Capacity&quot;</span><span class="p">))</span>
    
<span class="s1">&#39;Capacity Constraints&#39;</span>
<span class="n">CAPACITYOFONETECHNOLOGYUNIT_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Capacity_1_Technology_Unit&quot;</span><span class="p">))</span>
<span class="n">TOTALANNUALMAXCAPACITY_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Total_Annual_Max_Capacity&quot;</span><span class="p">))</span>
<span class="n">TOTALANNUALMINCAPACITY_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Total_Annual_Min_Capacity&quot;</span><span class="p">))</span>
    
<span class="s1">&#39;Investment Constraints&#39;</span>
<span class="n">TOTALANNUALMAXCAPACITYINVESTMENT_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;T_AnnualMax_CapacityInvestment&quot;</span><span class="p">))</span>
<span class="n">TOTALANNUALMINCAPACITYINVESTMENT_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;T_AnnualMin_CapacityInvestment&quot;</span><span class="p">))</span>
    
<span class="s1">&#39;Activity Constraints&#39;</span>
<span class="n">TOTALTECHNOLOGYANNUALACTIVITYUPPERLIMIT_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;TotalTechAnnualActivityUpLimit&quot;</span><span class="p">))</span>
<span class="n">TOTALTECHNOLOGYANNUALACTIVITYLOWERLIMIT_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;TotalTechAnnualActivityLowLimit&quot;</span><span class="p">))</span>
<span class="n">TOTALTECHNOLOGYMODELPERIODACTIVITYUPPERLIMIT_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;T_TechModelPeriodActivity_UL&quot;</span><span class="p">))</span>
<span class="n">TOTALTECHNOLOGYMODELPERIODACTIVITYLOWERLIMIT_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;T_TechModelPeriodActivity_LL&quot;</span><span class="p">))</span>
    
<span class="s1">&#39;Reserve Margin&#39;</span>
<span class="n">RESERVEMARGINTAGTECHNOLOGY_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Reserve_Margin_Tag_Technology&quot;</span><span class="p">))</span>
<span class="n">RESERVEMARGINTAGFUEL_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Reserve_Margin_Tag_Fuel&quot;</span><span class="p">))</span>
<span class="n">RESERVEMARGIN_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Reserve_Margin&quot;</span><span class="p">))</span>
    
<span class="s1">&#39;RE Generation Target&#39;</span>
<span class="n">RETAGTECHNOLOGY_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;RE_Tag_Technology&quot;</span><span class="p">))</span>
<span class="n">RETAGFUEL_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;RE_Tag_Fuel&quot;</span><span class="p">))</span>
<span class="n">REMINPRODUCTIONTARGET_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;RE_Min_Production_Target&quot;</span><span class="p">))</span>
    
<span class="s1">&#39;Emissions&#39;</span>
<span class="n">EMISSIONACTIVITYRATIO_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Emission_Activity_Ratio&quot;</span><span class="p">))</span>
<span class="n">EMISSIONSPENALTY_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Emissions_Penalty&quot;</span><span class="p">))</span>
<span class="n">ANNUALEXOGENOUSEMISSION_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Annual_Exogenous_Emission&quot;</span><span class="p">))</span>
<span class="n">ANNUALEMISSIONLIMIT_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Annual_Emission_Limit&quot;</span><span class="p">))</span>
<span class="n">MODELPERIODEXOGENOUSEMISSION_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;ModelPeriod_Exogenous_Emission&quot;</span><span class="p">))</span>
<span class="n">MODELPERIODEMISSIONLIMIT_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">parameters_file</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Model_Period_Emission_Limit&quot;</span><span class="p">))</span>
    
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span> <span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Initializing&#39;</span>
    
<span class="s1">&#39;Sets&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">YEAR</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">YEAR_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">))</span>
<span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">TECHNOLOGY_df</span><span class="p">,</span><span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">))</span>
<span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">TIMESLICE_df</span><span class="p">,</span><span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">))</span>
<span class="n">model</span><span class="o">.</span><span class="n">FUEL</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">FUEL_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">))</span>
<span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">EMISSION_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">))</span>
<span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">MODE_OF_OPERATION_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">))</span>
<span class="n">model</span><span class="o">.</span><span class="n">REGION</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">REGION_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">))</span>
<span class="n">model</span><span class="o">.</span><span class="n">SEASON</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">SEASON_df</span><span class="p">,</span><span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">))</span>
<span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">DAYTYPE_df</span><span class="p">,</span><span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">))</span>
<span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">DAILYTIMEBRACKET_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">))</span>
<span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">STORAGE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">))</span>

<span class="s1">&#39;Parameters&#39;</span>    
    
<span class="s1">&#39;Global parameters&#39;</span>
<span class="c1"># 25-Oct-2022: Added definitions for global parameters</span>

<span class="n">model</span><span class="o">.</span><span class="n">YearSplit</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">YEARSPLIT_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Definition: Duration of a modelled time slice, expressed as a fraction of the year. The sum of each entry over one modelled year should equal 1.</span>
<span class="c1"># Default = 1 / 8760</span>

<span class="n">model</span><span class="o">.</span><span class="n">DiscountRate</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">DISCOUNTRATE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Definition: Region specific value for the discount rate, expressed in decimals (e.g. 0.05).</span>

<span class="n">model</span><span class="o">.</span><span class="n">DaySplit</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.00137</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">DAYSPLIT_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Length of one DailyTimeBracket in one specific day as a fraction of the year (e.g., when distinguishing between days and night: 12h/(24h*365d)).</span>
<span class="c1"># Default = 1 / 8760</span>

<span class="n">model</span><span class="o">.</span><span class="n">Conversionls</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">CONVERSIONLS_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Binary parameter linking one TimeSlice to a certain Season. It has value 0 if the TimeSlice does not pertain to the specific season, 1 if it does.</span>
<span class="c1"># Season: It gives indication (by successive numerical values) of how many seasons (e.g. winter, intermediate, summer) are accounted for and in </span>
<span class="c1"># which order. This set is needed if storage facilities are included in the model.</span>

<span class="n">model</span><span class="o">.</span><span class="n">Conversionld</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">CONVERSIONLD_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Binary parameter linking one TimeSlice to a certain DayType. It has value 0 if the TimeSlice does not pertain to the specific DayType, 1 if it does.</span>
<span class="c1"># Day Type: It gives indication (by successive numerical values) of how many day types (e.g. workday, weekend) are accounted for and in which order. </span>
<span class="c1"># This set is needed if storage facilities are included in the model.</span>

<span class="n">model</span><span class="o">.</span><span class="n">Conversionlh</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">CONVERSIONLH_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span> 
<span class="c1"># Binary parameter linking one TimeSlice to a certain DailyTimeBracket. It has value 0 if the TimeSlice does not pertain to the specific DailyTimeBracket, 1 if it does.    </span>
<span class="c1"># Daily Time Bracket: It gives indication (by successive numerical values) of how many parts the day is split into (e.g. night, morning, afternoon, evening) </span>
<span class="c1"># and in which order these parts are sorted. This set is needed if storage facilities are included in the model.</span>

<span class="n">model</span><span class="o">.</span><span class="n">DaysInDayType</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">DAYSINDAYTYPE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Number of days for each day type, within one week (natural number, ranging from 1 to 7)</span>

<span class="n">model</span><span class="o">.</span><span class="n">TradeRoute</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">TRADEROUTE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Binary parameter defining the links between region r and region rr, to enable or disable trading of a specific commodity. It has value 1 when two regions are linked, 0 otherwise</span>

<span class="n">model</span><span class="o">.</span><span class="n">DepreciationMethod</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">DEPRECIATIONMETHOD_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Binary parameter defining the type of depreciation to be applied. It has value 1 for sinking fund depreciation, value 2 for straight-line depreciation.</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Demands&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">SpecifiedAnnualDemand</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">SPECIFIEDANNUALDEMAND_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Total specified demand for the year, linked to a specific ‘time of use’ during the year.</span>

<span class="k">if</span> <span class="n">Exercise_Flag</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">model</span><span class="o">.</span><span class="n">SpecifiedDemandProfile</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">SDP_exercise</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">model</span><span class="o">.</span><span class="n">SpecifiedDemandProfile</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">SPECIFIEDDEMANDPROFILE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Annual fraction of energy-service or commodity demand that is required in each time slice. For each year, all the defined SpecifiedDemandProfile input values should sum up to 1.</span>

<span class="n">model</span><span class="o">.</span><span class="n">AccumulatedAnnualDemand</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">ACCUMULATEDANNUALDEMAND_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Accumulated Demand for a certain commodity in one specific year. It cannot be defined for a commodity if its SpecifiedAnnualDemand for the same year is already defined and vice versa.</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Performance&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">CapacityToActivityUnit</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">8760</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">CAPACITYTOACTIVITYUNIT_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Conversion factor relating the energy that would be produced when one unit of capacity is fully used in one year.</span>
<span class="c1"># 24-Nov-2022 (CM): In the Pyomo-OSeMOSYS go-by, the default = 1, which is incorrect. The capacity_to_activity_unit should default to 8760; because that is how many hours are there in a year.</span>

<span class="n">model</span><span class="o">.</span><span class="n">CapacityFactor</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">CAPACITYFACTOR_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Capacity available per each TimeSlice expressed as a fraction of the total installed capacity, with values ranging </span>
<span class="c1"># from 0 to 1. It gives the possibility to account for forced outages.</span>

<span class="n">model</span><span class="o">.</span><span class="n">AvailabilityFactor</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">AVAILABILITYFACTOR_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Maximum time a technology can run in the whole year, as a fraction of the year ranging from 0 to 1. It gives the</span>
<span class="c1"># possibility to account for planned outages.</span>

<span class="n">model</span><span class="o">.</span><span class="n">OperationalLife</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">OPERATIONALLIFE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Useful lifetime of a technology, expressed in years.</span>
<span class="c1"># 24-Nov-2022 (CM): In the Pyomo-OSeMOSYS go-by, the default = 1. In Kevin Palmer-Wilson&#39;s model, it was 80. Given that many of my models will be in the sub-annual range, either is fine.</span>
<span class="c1"># 24-Nov-2022 (CM): A good practice would be to specify operational life all the time.</span>

<span class="n">model</span><span class="o">.</span><span class="n">ResidualCapacity</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">RESIDUALCAPACITY_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Remained capacity available from before the modelling period.</span>

<span class="k">if</span> <span class="n">Exercise_Flag</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">model</span><span class="o">.</span><span class="n">InputActivityRatio</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">IAR_exercise</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">model</span><span class="o">.</span><span class="n">InputActivityRatio</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">INPUTACTIVITYRATIO_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
    
<span class="c1"># Rate of use of a commodity by a technology, as a ratio of the rate of activity.</span>

<span class="n">model</span><span class="o">.</span><span class="n">OutputActivityRatio</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">OUTPUTACTIVITYRATIO_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Rate of commodity output from a technology, as a ratio of the rate of activity.</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Technology Costs&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">CapitalCost</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.000001</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">CAPITALCOST_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">),</span> <span class="n">mutable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Capital investment cost of a technology, per unit of capacity.</span>

<span class="n">model</span><span class="o">.</span><span class="n">VariableCost</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.000001</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">VARIABLECOST_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">),</span> <span class="n">mutable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Cost of a technology for a given mode of operation (Variable O&amp;M cost), per unit of activity.</span>

<span class="n">model</span><span class="o">.</span><span class="n">FixedCost</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">FIXEDCOST_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Fixed O&amp;M cost of a technology, per unit of capacity.</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Storage&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">TechnologyToStorage</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">TECHNOLOGYTOSTORAGE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Binary parameter linking a technology to the storage facility it charges. It has value 1 if the technology and the storage facility are linked, 0 otherwise.</span>

<span class="n">model</span><span class="o">.</span><span class="n">TechnologyFromStorage</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">TECHNOLOGYFROMSTORAGE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Binary parameter linking a storage facility to the technology it feeds. It has value 1 if the technology and the storage facility are linked, 0 otherwise.</span>

<span class="n">model</span><span class="o">.</span><span class="n">StorageLevelStart</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.0000001</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">STORAGELEVELSTART_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">),</span> <span class="n">mutable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Level of storage at the beginning of first modelled year, in units of activity.</span>

<span class="s1">&#39;Adding storage level finish&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">StorageLevelFinish</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.0000001</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">STORAGELEVELFINISH_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">),</span> <span class="n">mutable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">StorageMaxChargeRate</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">9999999</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">STORAGEMAXCHARGERATE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Maximum charging rate for the storage, in units of activity per year.</span>
    
<span class="n">model</span><span class="o">.</span><span class="n">StorageMaxDischargeRate</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">9999999</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">STORAGEMAXDISCHARGERATE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Maximum discharging rate for the storage, in units of activity per year.</span>

<span class="n">model</span><span class="o">.</span><span class="n">MinStorageCharge</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">MINSTORAGECHARGE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">),</span> <span class="n">mutable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># It sets a lower bound to the amount of energy stored, as a fraction of the maximum, with a number reanging between </span>
<span class="c1"># 0 and 1. The storage facility cannot be emptied below this level.</span>

<span class="n">model</span><span class="o">.</span><span class="n">OperationalLifeStorage</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">OPERATIONALLIFESTORAGE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Useful lifetime of the storage facility.</span>

<span class="n">model</span><span class="o">.</span><span class="n">CapitalCostStorage</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">CAPITALCOSTSTORAGE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Investment costs of storage additions, defined per unit of storage capacity.</span>
    
<span class="n">model</span><span class="o">.</span><span class="n">ResidualStorageCapacity</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">RESIDUALSTORAGECAPACITY_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Exogenously defined storage capacities.</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Capacity Constraints&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">CapacityOfOneTechnologyUnit</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">CAPACITYOFONETECHNOLOGYUNIT_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Capacity of one new unit of a technology. In case the user sets this parameter, the related technology will be installed only in batches of the </span>
<span class="c1"># specified capacity and the problem will turn into a Mixed Integer Linear Problem.</span>

<span class="n">model</span><span class="o">.</span><span class="n">TotalAnnualMaxCapacity</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">9999999</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">TOTALANNUALMAXCAPACITY_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Total maximum existing (residual plus cumulatively installed) capacity allowed for a technology in a specified year.</span>

<span class="n">model</span><span class="o">.</span><span class="n">TotalAnnualMinCapacity</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">TOTALANNUALMINCAPACITY_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Total minimum existing (residual plus cumulatively installed) capacity allowed for a technology in a specified year.</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Investment Constraints&#39;</span>  

<span class="n">model</span><span class="o">.</span><span class="n">TotalAnnualMaxCapacityInvestment</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">9999999</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">TOTALANNUALMAXCAPACITYINVESTMENT_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Maximum capacity of a technology, expressed in power units.</span>

<span class="n">model</span><span class="o">.</span><span class="n">TotalAnnualMinCapacityInvestment</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">TOTALANNUALMINCAPACITYINVESTMENT_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Minimum capacity of a technology, expressed in power units.</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Activity Constraints&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">TotalTechnologyAnnualActivityUpperLimit</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">9999999</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">TOTALTECHNOLOGYANNUALACTIVITYUPPERLIMIT_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Total maximum level of activity allowed for a technology in one year.</span>

<span class="n">model</span><span class="o">.</span><span class="n">TotalTechnologyAnnualActivityLowerLimit</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">TOTALTECHNOLOGYANNUALACTIVITYLOWERLIMIT_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">),</span> <span class="n">within</span><span class="o">=</span><span class="n">Reals</span><span class="p">)</span>
<span class="c1"># Total minimum level of activity allowed for a technology in one year.</span>

<span class="n">model</span><span class="o">.</span><span class="n">TotalTechnologyModelPeriodActivityUpperLimit</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">9999999</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">TOTALTECHNOLOGYMODELPERIODACTIVITYUPPERLIMIT_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Total maximum level of activity allowed for a technology in the entire modelled period.</span>

<span class="n">model</span><span class="o">.</span><span class="n">TotalTechnologyModelPeriodActivityLowerLimit</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">TOTALTECHNOLOGYMODELPERIODACTIVITYLOWERLIMIT_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">),</span> <span class="n">within</span><span class="o">=</span><span class="n">Reals</span><span class="p">)</span>
<span class="c1"># Total minimum level of activity allowed for a technology in the entire modelled period.</span>
<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Reserve Margin&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">ReserveMarginTagTechnology</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">RESERVEMARGINTAGTECHNOLOGY_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Binary parameter tagging the renewable technologies that must contribute to reaching the indicated minimum renewable </span>
<span class="c1"># production target. It has value 1 for thetechnologies contributing, 0 otherwise.</span>

<span class="n">model</span><span class="o">.</span><span class="n">ReserveMarginTagFuel</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">RESERVEMARGINTAGFUEL_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Binary parameter tagging the fuels to which the renewable target applies to. It has value 1 if the target applies, 0 otherwise.</span>

<span class="n">model</span><span class="o">.</span><span class="n">ReserveMargin</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">RESERVEMARGIN_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Minimum ratio of all renewable commodities tagged in the RETagCommodity parameter, to be produced by the technologies </span>
<span class="c1"># tagged with the RETechnology parameter.</span>
<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;RE Generation Target&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">RETagTechnology</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">RETAGTECHNOLOGY_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Binary parameter tagging the renewable technologies that must contribute to reaching the indicated minimum</span>
<span class="c1"># renewable production target. It has value 1 for thetechnologies contributing, 0 otherwise.</span>

<span class="n">model</span><span class="o">.</span><span class="n">RETagFuel</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">RETAGFUEL_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Binary parameter tagging the fuels to which the renewable target applies to. It has value 1 if the target applies, 0 otherwise.</span>

<span class="n">model</span><span class="o">.</span><span class="n">REMinProductionTarget</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">REMINPRODUCTIONTARGET_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Minimum ratio of all renewable commodities tagged in the RETagCommodity parameter, to be produced by the technologies </span>
<span class="c1"># tagged with the RETechnology parameter.</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Emissions &amp; Penalties&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">EmissionActivityRatio</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">EMISSIONACTIVITYRATIO_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Emission factor of a technology per unit of activity, per mode of operation.</span>

<span class="n">model</span><span class="o">.</span><span class="n">EmissionsPenalty</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">EMISSIONSPENALTY_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Penalty per unit of emission.</span>

<span class="n">model</span><span class="o">.</span><span class="n">AnnualExogenousEmission</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">ANNUALEXOGENOUSEMISSION_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># It allows the user to account for additional annual emissions, on top of those computed endogenously by the model (e.g. emissions generated outside the region).</span>

<span class="n">model</span><span class="o">.</span><span class="n">AnnualEmissionLimit</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">9999999</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">ANNUALEMISSIONLIMIT_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Annual upper limit for a specific emission generated in the whole modelled region.</span>

<span class="n">model</span><span class="o">.</span><span class="n">ModelPeriodExogenousEmission</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">MODELPERIODEXOGENOUSEMISSION_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># It allows the user to account for additional emissions over the entire modelled period, on top of those computed </span>
<span class="c1"># endogenously by the model (e.g. generated outside the region).</span>

<span class="n">model</span><span class="o">.</span><span class="n">ModelPeriodEmissionLimit</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">9999999</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="n">Process_Data</span><span class="p">(</span><span class="n">MODELPERIODEMISSIONLIMIT_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;parameter&quot;</span><span class="p">))</span>
<span class="c1"># Annual upper limit for a specific emission generated in the whole modelled region, over the entire modelled period.</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;Model Variables&#39;</span>

<span class="n">my_seed</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># Create a seed value to initialize variables with a random number</span>
<span class="n">rand_init</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>

<span class="c1"># model.StorageLevelStart = Var(model.REGION, model.STORAGE, bounds=(0, None), domain=Reals, initialize=rand_init)</span>
<span class="c1"># 26-Oct-2022: Troubleshooting; StorageLevelStart is now classified as a parameter - hence it is deleted as a variable now.</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Demands&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">RateOfDemand</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">Demand</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Re-organized as per the same order in documentation</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Storage&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">RateOfStorageCharge</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Intermediate variable. It represents the commodity that would be charged to the storage facility s in one time slice if the latter lasted the whole year. It is a function of the RateOfActivity and the parameter TechnologyToStorage.</span>
<span class="n">model</span><span class="o">.</span><span class="n">RateOfStorageDischarge</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Intermediate variable. It represents the commodity that would be discharged from storage facility s in one time slice if the latter lasted the whole year. It is a function of the RateOfActivity and the parameter TechnologyFromStorage.</span>
<span class="n">model</span><span class="o">.</span><span class="n">NetChargeWithinYear</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Net quantity of commodity charged to storage facility s in year y. It is a function of the RateOfStorageCharge and the RateOfStorageDischarge and it can be negative.</span>
<span class="n">model</span><span class="o">.</span><span class="n">NetChargeWithinDay</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Net quantity of commodity charged to storage facility s in daytype ld. It is a function of the RateOfStorageCharge and the RateOfStorageDischarge and can be negative.</span>
<span class="n">model</span><span class="o">.</span><span class="n">StorageLevelYearStart</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Level of stored commodity in storage facility s in the first time step of year y.</span>
<span class="n">model</span><span class="o">.</span><span class="n">StorageLevelYearFinish</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Level of stored commodity in storage facility s in the last time step of year y.</span>
<span class="n">model</span><span class="o">.</span><span class="n">StorageLevelSeasonStart</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Level of stored commodity in storage facility s in the first time step of season ls.</span>
<span class="n">model</span><span class="o">.</span><span class="n">StorageLevelDayTypeStart</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Level of stored commodity in storage facility s in the first time step of daytype ld.</span>
<span class="n">model</span><span class="o">.</span><span class="n">StorageLevelDayTypeFinish</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Level of stored commodity in storage facility s in the last time step of daytype ld.</span>
<span class="c1">#model.StorageLevelTSStart = Var(model.REGION, model.STORAGE, model.TIMESLICE, model.YEAR, bounds = (0, None), domain=Reals, initialize=rand_init)</span>
<span class="c1"># 27-Sep-2022 Removed StorageLevelTSStart</span>
<span class="n">model</span><span class="o">.</span><span class="n">StorageLowerLimit</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Minimum allowed level of stored commodity in storage facility s, as a function of the storage capacity and the user-defined MinStorageCharge ratio.</span>
<span class="n">model</span><span class="o">.</span><span class="n">StorageUpperLimit</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Maximum allowed level of stored commodity in storage facility s. It corresponds to the total existing capacity of storage facility s (summing newly installed and pre-existing capacities).</span>
<span class="n">model</span><span class="o">.</span><span class="n">AccumulatedNewStorageCapacity</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Cumulative capacity of newly installed storage from the beginning of the time domain to year y.</span>
<span class="n">model</span><span class="o">.</span><span class="n">NewStorageCapacity</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Capacity of newly installed storage in year y.</span>
<span class="n">model</span><span class="o">.</span><span class="n">CapitalInvestmentStorage</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Undiscounted investment in new capacity for storage facility s. Derived from the NewStorageCapacity and the parameter CapitalCostStorage.</span>
<span class="n">model</span><span class="o">.</span><span class="n">DiscountedCapitalInvestmentStorage</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Investment in new capacity for storage facility s, discounted through the parameter DiscountRate.</span>
<span class="n">model</span><span class="o">.</span><span class="n">SalvageValueStorage</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Salvage value of storage facility s in year y, as a function of the parameters OperationalLifeStorage and DepreciationMethod.</span>
<span class="n">model</span><span class="o">.</span><span class="n">DiscountedSalvageValueStorage</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Salvage value of storage facility s, discounted through the parameter DiscountRate.</span>
<span class="n">model</span><span class="o">.</span><span class="n">TotalDiscountedStorageCost</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1"># Difference between the discounted capital investment in new storage facilities and the salvage value in year y.</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Capacity Variables&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">NumberOfNewTechnologyUnits</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Integers</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">NewCapacity</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span> <span class="c1"># This vaiable must be within Real numbers for feasible solution</span>
<span class="n">model</span><span class="o">.</span><span class="n">AccumulatedNewCapacity</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">TotalCapacityAnnual</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Activity Variables&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">RateOfActivity</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Eliminated the &gt;=0 constraint (PMT) #18-Nov-2022: The number needs to be non-negative real number. PMT removed it for some reason, but it causes problems with multiple modes of operation.</span>
<span class="n">model</span><span class="o">.</span><span class="n">RateOfTotalActivity</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">TotalTechnologyAnnualActivity</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">TotalAnnualTechnologyActivityByMode</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">RateOfProductionByTechnologyByMode</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">RateOfProductionByTechnology</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">ProductionByTechnology</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">ProductionByTechnologyAnnual</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">RateOfProduction</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">Production</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">RateOfUseByTechnologyByMode</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">RateOfUseByTechnology</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">UseByTechnologyAnnual</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">RateOfUse</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">UseByTechnology</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">Use</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">Trade</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">TradeAnnual</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">ProductionAnnual</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">UseAnnual</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c1">#model.DemandAnnual = Var(model.REGION, model.FUEL, model.YEAR, bounds=(0, None), initialize=0)</span>
<span class="c1"># 31-Oct-2022: An element from Kevin Palmer-Wilson&#39;s model; verify if needed.</span>
<span class="c1"># 04-Nov-2022: Turning off as not needed.</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Costing Variables&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">CapitalInvestment</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">DiscountedCapitalInvestment</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">SalvageValue</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">DiscountedSalvageValue</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">OperatingCost</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">DiscountedOperatingCost</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">AnnualVariableOperatingCost</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">AnnualFixedOperatingCost</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">VariableOperatingCost</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">TotalDiscountedCostByTechnology</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">TotalDiscountedCost</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">ModelPeriodCostByRegion</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Reserve Margin&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">TotalCapacityInReserveMargin</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">DemandNeedingReserveMargin</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;RE Gen Target&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">TotalREProductionAnnual</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">RETotalProductionOfTargetFuelAnnual</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">TotalTechnologyModelPeriodActivity</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c1">#------------------------------------------------------------------------------------------------------#</span>
<span class="s1">&#39;Emissions&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">AnnualTechnologyEmissionByMode</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">AnnualTechnologyEmission</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">AnnualTechnologyEmissionPenaltyByEmission</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">AnnualTechnologyEmissionsPenalty</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">DiscountedTechnologyEmissionsPenalty</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">AnnualEmissions</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">ModelPeriodEmissions</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">domain</span><span class="o">=</span><span class="n">Reals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;Model Equations &amp; Constraints&#39;</span>
<span class="s1">&#39;This section includes the constraints &amp; associated equations as per the OSeMOSYS documentation&#39;</span>
<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Objective Function&#39;</span>

<span class="s1">&#39;This equation represents the overall objective of the model. The default in OSeMOSYS is to minimise the total system cost, over the entire model period.&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">OBJ</span> <span class="o">=</span> <span class="n">Objective</span><span class="p">(</span><span class="n">rule</span><span class="o">=</span><span class="n">ObjectiveFunction_rule</span><span class="p">,</span> <span class="n">sense</span><span class="o">=</span> <span class="n">minimize</span><span class="p">)</span>
<span class="c1"># minimize cost: sum{r in REGION, y in YEAR} TotalDiscountedCost[r,y];</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Demand Constraints&#39;</span>

<span class="s1">&#39;The equation below is used to generate the term RateOfDemand, from the user-provided data for SpecifiedAnnualDemand and SpecifiedDemandProfile.&#39;</span>
<span class="s1">&#39; The RateOfDemand is defined for each combination of commodity, TimeSlice and Year.&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">EQ_SpecifiedDemand_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EQ_SpecifiedDemand_rule</span><span class="p">)</span>
<span class="c1"># SpecifiedAnnualDemand[r,f,y]*SpecifiedDemandProfile[r,f,l,y] / YearSplit[l,y]=RateOfDemand[r,l,f,y];</span>

<span class="c1"># model.Demand_constraint = Constraint(model.REGION, model.FUEL, model.YEAR, rule=Demand_rule)</span>
<span class="c1"># 31-Oct-2022: Verify if this is equation is as per the documentation or not.</span>
<span class="c1"># 04-Nov-2022: Turning off as it is not needed.</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Capacity Adequacy A&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Used to first calculate total capacity of each technology for each year based on existing capacity </span>
<span class="sd">from before the model period (ResidualCapacity), AccumulatedNewCapacity during the modelling period, and NewCapacity </span>
<span class="sd">installed in each year. It is then ensured that this Capacity is sufficient to meet the RateOfTotalActivity in each </span>
<span class="sd">TimeSlice and Year. An additional constraint based on the size, or capacity, of each unit of a Technology is included </span>
<span class="sd">(CapacityOfOneTechnologyUnit). This stipulates that the capacity of certain Technology can only be a multiple of the </span>
<span class="sd">user-defined CapacityOfOneTechnologyUnit.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">CAa1_TotalNewCapacity_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">CAa1_TotalNewCapacity_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">CAa2_TotalAnnualCapacity_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">CAa2_TotalAnnualCapacity_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">CAa3_TotalActivityOfEachTechnology_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">CAa3_TotalActivityOfEachTechnology_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added from documentation.</span>

<span class="n">model</span><span class="o">.</span><span class="n">CAa4_ConstraintCapacity_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">CAa4_ConstraintCapacity_rule</span><span class="p">,)</span>

<span class="c1">#model.CAa4b_Constraint_Capacity_constraint = Constraint(model.REGION, model.TIMESLICE, model.TECHNOLOGY, model.YEAR, rule=CAa4b_Constraint_Capacity_rule)</span>
<span class="c1"># 31-Oct-2022: Removed and replaced with documentation version.</span>

<span class="n">model</span><span class="o">.</span><span class="n">CAa5_TotalNewCapacity_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">CAa5_TotalNewCapacity_rule</span><span class="p">)</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Capacity Adequacy B&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Ensures that adequate capacity of technologies is present to at least meet the average annual demand.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">CAb1_PlannedMaintenance_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">CAb1_PlannedMaintenance_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">CAb1_PlannedMaintenance_Negative_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">CAb1_PlannedMaintenance_Negative_rule</span><span class="p">)</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Energy Balance A&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Ensures that demand for each commodity is met in each TimeSlice.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBa1_RateOfFuelProduction1_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBa1_RateOfFuelProduction1_rule</span><span class="p">)</span> 

<span class="n">model</span><span class="o">.</span><span class="n">EBa2_RateOfFuelProduction2_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBa2_RateOfFuelProduction2_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBa3_RateOfFuelProduction3_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBa3_RateOfFuelProduction3_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBa4_RateOfFuelUse1_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBa4_RateOfFuelUse1_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBa5_RateOfFuelUse2_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBa5_RateOfFuelUse2_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBa6_RateOfFuelUse3</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBa6_RateOfFuelUse3_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBa7_EnergyBalanceEachTS1_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBa7_EnergyBalanceEachTS1_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBa8_EnergyBalanceEachTS2_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBa8_EnergyBalanceEachTS2_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBa9_EnergyBalanceEachTS3_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBa9_EnergyBalanceEachTS3_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBa10_EnergyBalanceEachTS4_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBa10_EnergyBalanceEachTS4_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBa11_EnergyBalanceEachTS5</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBa11_EnergyBalanceEachTS5_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="c1">#model.EBa11_EnergyBalanceEachTS5_constraint = Constraint( model.REGION, model.TIMESLICE, model.FUEL, model.YEAR, rule=EBa11_EnergyBalanceEachTS5_rule)</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Energy Balance B&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Ensures that demand for each commodity is met in each Year.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="c1">#model.EBb3_EnergyBalanceEachYear3_constraint = Constraint(model.REGION, model.REGION, model.FUEL, model.YEAR, rule=EBb3_EnergyBalanceEachYear3_rule)</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBb1_EnergyBalanceEachYear1</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBb1_EnergyBalanceEachYear1_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBb2_EnergyBalanceEachYear2_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBb2_EnergyBalanceEachYear2_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBb3_EnergyBalanceEachYear3_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBb3_EnergyBalanceEachYear3_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">EBb4_EnergyBalanceEachYear4_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">EBb4_EnergyBalanceEachYear4_rule</span><span class="p">)</span>

<span class="c1">#model.EnergyBalanceEachTS5_constraint = Constraint(model.REGION, model.TIMESLICE, model.FUEL, model.YEAR, rule=EnergyBalanceEachTS5_rule)</span>
<span class="c1"># 31-Oct-2022: Replaced with EBa11 - to be deleted later.</span>

<span class="c1">#model.EnergyConstraint_constraint = Constraint(model.REGION, model.YEAR, rule=EnergyConstraint_rule)</span>
<span class="c1"># 31-Oct-2022: Verify what this equation is; seems to be a relic from Kevin Palmer-Wilson&#39;s model.</span>
<span class="c1"># 04-Nov-2022: This is Kevin Palmer-Wilson&#39;s expression of RE4; which has been inserted elsewhere already.</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Accounting Technology Production/Use&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Accounting equations used to generate specific intermediate variables</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">Acc1_FuelProductionByTechnology_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">Acc1_FuelProductionByTechnology_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">Acc2_FuelUseByTechnology_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">Acc2_FuelUseByTechnology_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">Acc3_AverageAnnualRateOfActivity_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">Acc3_AverageAnnualRateOfActivity_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">Acc4_ModelPeriodCostByRegion_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">Acc4_ModelPeriodCostByRegion_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Storage Equations&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">S1_RateofStorageCharge_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">S1_RateofStorageCharge_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">S2_RateofStorageDischarge_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">S2_RateOfStorageDischarge_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">S3_NetChargeWithinYear_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">S3_NetChargeWithinYear_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">S4_NetChargeWithinDay_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">S4_NetChargeWithinDay_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">S5_S6_StorageLevelYearStart_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">S5_S6_StorageLevelYearStart_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">S7_S8_StorageLevelYearFinish_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">S7_S8_StorageLevelYearFinish_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">S9_S10_StorageLevelSeasonStart_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">S9_S10_StorageLevelSeasonStart_rule</span><span class="p">)</span>
<span class="c1"># 04-Oct-2022: Added S9_S10_StorageLevelSeasonStart_constraint</span>

<span class="n">model</span><span class="o">.</span><span class="n">S11_S12_StorageLevelDayTypeStart_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">S11_S12_StorageLevelDayTypeStart_rule</span><span class="p">)</span>
<span class="c1"># 04-Oct-2022: Added S11_S12_StorageLevelDayTypeStart_constraint</span>

<span class="n">model</span><span class="o">.</span><span class="n">S13_S14_S15_StorageLevelDayTypeFinish_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">S13_S14_S15_StorageLevelDayTypeFinish_rule</span><span class="p">)</span>
<span class="c1"># 04-Oct-2022: Added S13_S14_S15_StorageLevelDayTypeFinish_constraint</span>

<span class="c1">#model.S1_StorageLevelYearStart_constraint = Constraint(model.REGION, model.STORAGE, model.YEAR, rule=S1_StorageLevelYearStart_rule)</span>
<span class="c1"># 27-Sep-2022: Removed S1_StorageLevelYearStart</span>

<span class="c1">#model.S2_StorageLevelTSStart_constraint = Constraint(model.REGION, model.STORAGE, model.TIMESLICE, model.YEAR, rule=S2_StorageLevelTSStart_rule)</span>
<span class="c1"># 27-Sep-2022: Removed S2_StorageLevelTSStart</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Storage Constraints&#39;</span>

<span class="c1">#model.SC8_StorageRefilling_constraint = Constraint(model.STORAGE, model.REGION, rule= SC8_StorageRefilling_rule)</span>
<span class="c1"># 23-Sep-2022: Discussed with Cristiano; only relevant to Kevin&#39;s model.</span>

<span class="c1">#model.SC9_StopModeLeakage_constraint = Constraint(model.REGION, model.TIMESLICE, model.YEAR, model.MODE_OF_OPERATION, model.TECHNOLOGY, model.STORAGE, rule= SC9_StopModeLeakage_rule) </span>
<span class="c1"># 23-Sep-2022: Discussed with Cristiano; only relevant to Kevin&#39;s model.</span>

<span class="c1">#model.NonStorageConstraint_constraint = Constraint(model.REGION, model.TIMESLICE, model.TECHNOLOGY, model.MODE_OF_OPERATION, model.YEAR, rule=NonStorageConstraint_rule)</span>
<span class="c1"># 23-Sep-2022: Discussed with Cristiano; only relevant to Kevin&#39;s model.</span>

<span class="n">model</span><span class="o">.</span><span class="n">SC1_LowerLimit_1TimeBracket1InstanceOfDayType1week_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">SC1_LowerLimit_1TimeBracket1InstanceOfDayType1week_rule</span><span class="p">)</span> 
<span class="c1"># 18-Oct-2022: Added the OSeMOSYS documentation definition</span>
<span class="c1"># s.t. SC1_LowerLimit_BeginningOfDailyTimeBracketOfFirstInstanceOfDayTypeInFirstWeekConstraint{r in REGION, s in STORAGE, ls in SEASON, ld in DAYTYPE, lh in DAILYTIMEBRACKET, y in YEAR}:</span>

<span class="n">model</span><span class="o">.</span><span class="n">SC1_UpperLimit_1TimeBracket1InstanceOfDayType1week_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">SC1_UpperLimit_1TimeBracket1InstanceOfDayType1week_rule</span><span class="p">)</span>
<span class="c1"># 18-Oct-2022: Added the OSeMOSYS documentation definition</span>
<span class="c1"># s.t. SC1_UpperLimit_BeginningOfDailyTimeBracketOfFirstInstanceOfDayTypeInFirstWeekConstraint{r in REGION, s in STORAGE, ls in SEASON, ld in DAYTYPE, lh in DAILYTIMEBRACKET, y in YEAR}:</span>

<span class="n">model</span><span class="o">.</span><span class="n">SC2_LowerLimit_EndDailyTimeBracketLastInstanceOfDayType1Week_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">SC2_LowerLimit_EndDailyTimeBracketLastInstanceOfDayType1Week_rule</span><span class="p">)</span>
<span class="c1"># 18-Oct-2022: Added the OSeMOSYS documentation definition</span>
<span class="c1"># s.t. SC2_LowerLimit_EndOfDailyTimeBracketOfLastInstanceOfDayTypeInFirstWeekConstraint{r in REGION, s in STORAGE, ls in SEASON, ld in DAYTYPE, lh in DAILYTIMEBRACKET, y in YEAR}: </span>

<span class="n">model</span><span class="o">.</span><span class="n">SC2_UpperLimit_EndDailyTimeBracketLastInstanceOfDayType1Week_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">SC2_UpperLimit_EndDailyTimeBracketLastInstanceOfDayType1Week_rule</span><span class="p">)</span>
<span class="c1"># 18-Oct-2022: Added the OSeMOSYS documentation definition</span>
<span class="c1"># s.t. SC2_UpperLimit_EndOfDailyTimeBracketOfLastInstanceOfDayTypeInFirstWeekConstraint{r in REGION, s in STORAGE, ls in SEASON, ld in DAYTYPE, lh in DAILYTIMEBRACKET, y in YEAR}:</span>

<span class="n">model</span><span class="o">.</span><span class="n">SC3_LowerLimit_EndDailyTimeBracketLastInstanceOfDayTypeLastWeek_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">SC3_LowerLimit_EndDailyTimeBracketLastInstanceOfDayTypeLastWeek_rule</span><span class="p">)</span>
<span class="c1"># 18-Oct-2022: Added the OSeMOSYS documentation definition</span>
<span class="c1"># s.t. SC3_LowerLimit_EndOfDailyTimeBracketOfLastInstanceOfDayTypeInLastWeekConstraint{r in REGION, s in STORAGE, ls in SEASON, ld in DAYTYPE, lh in DAILYTIMEBRACKET, y in YEAR}:</span>

<span class="n">model</span><span class="o">.</span><span class="n">SC3_UpperLimit_EndDailyTimeBracketLastInstanceOfDayTypeLastWeek_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">SC3_UpperLimit_EndDailyTimeBracketLastInstanceOfDayTypeLastWeek_rule</span><span class="p">)</span>
<span class="c1"># 19-Oct-2022: Added the OSeMOSYS documentation definition</span>
<span class="c1"># s.t. SC3_UpperLimit_EndOfDailyTimeBracketOfLastInstanceOfDayTypeInLastWeekConstraint{r in REGION, s in STORAGE, ls in SEASON, ld in DAYTYPE, lh in DAILYTIMEBRACKET, y in YEAR}:  </span>

<span class="n">model</span><span class="o">.</span><span class="n">SC4_LowerLimit_1TimeBracket1InstanceOfDayTypeLastweek_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">SC4_LowerLimit_1TimeBracket1InstanceOfDayTypeLastweek_rule</span><span class="p">)</span>
<span class="c1"># 19-Oct-2022: Added the OSeMOSYS documentation definition</span>
<span class="c1"># s.t. SC4_LowerLimit_BeginningOfDailyTimeBracketOfFirstInstanceOfDayTypeInLastWeekConstraint{r in REGION, s in STORAGE, ls in SEASON, ld in DAYTYPE, lh in DAILYTIMEBRACKET, y in YEAR}:</span>

<span class="n">model</span><span class="o">.</span><span class="n">SC4_UpperLimit_1TimeBracket1InstanceOfDayTypeLastweek_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">SC4_UpperLimit_1TimeBracket1InstanceOfDayTypeLastweek_rule</span><span class="p">)</span>
<span class="c1"># 19-Oct-2022: Added the OSeMOSYS documentation definition</span>
<span class="c1"># s.t. SC4_UpperLimit_BeginningOfDailyTimeBracketOfFirstInstanceOfDayTypeInLastWeekConstraint{r in REGION, s in STORAGE, ls in SEASON, ld in DAYTYPE, lh in DAILYTIMEBRACKET, y in YEAR}:</span>

<span class="c1">#model.SC1a_LowerLimitEndofModelPeriod_constraint = Constraint(model.STORAGE, model.YEAR, model.REGION, rule=SC1a_LowerLimitEndofModelPeriod_rule)</span>
<span class="c1">#model.SC2_UpperLimit_constraint = Constraint(model.REGION, model.STORAGE, model.TIMESLICE, model.YEAR, rule=SC2_UpperLimit_rule)</span>
<span class="c1">#model.SC2a_UpperLimitEndofModelPeriod_constraint = Constraint(model.STORAGE,model.YEAR,model.REGION, rule=SC2a_UpperLimitEndofModelPeriod_rule)</span>
<span class="c1">#model.SC2a_UpperLimitEndofModelPeriod_Negative_constraint = Constraint(model.STORAGE, model.YEAR, model.REGION, rule= SC2a_UpperLimitEndofModelPeriod_Negative_rule)</span>
<span class="c1">#model.SC7_StorageMaxUpperLimit_constraint = Constraint(model.STORAGE, model.YEAR, model.REGION, rule= SC7_StorageMaxUpperLimit_rule)</span>
<span class="c1"># 27-Sep-2022: This could refer to SC5 that is entered below.</span>

<span class="n">model</span><span class="o">.</span><span class="n">SC5_MaxCharge_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">SC5_MaxCharge_rule</span><span class="p">)</span>
<span class="c1"># 27-Sep-2022: Added MaxCharge_constraint</span>

<span class="n">model</span><span class="o">.</span><span class="n">SC6_MaxDischarge_consraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SEASON</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAYTYPE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">DAILYTIMEBRACKET</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">SC6_MaxDischarge_rule</span><span class="p">)</span>
<span class="c1"># 27-Sep-2022: Added MaxDischarge_constraint</span>

<span class="s1">&#39;Adding storage level finish&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">TEMP_StorageLevelFinish_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">TEMP_StorageLevelFinish_rule</span><span class="p">)</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Storage Investments&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Calculates the total discounted capital costs expenditure for each storage technology in each year.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">SI1_StorageUpperLimit_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">SI1_StorageUpperLimit_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">SI2_StorageLowerLimit_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">SI2_StorageLowerLimit_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">SI3_TotalNewStorage_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">SI3_TotalNewStorage_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">SI4_UndiscountedCapitalInvestmentStorage_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">SI4_UndiscountedCapitalInvestmentStorage_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">SI5_DiscountingCapitalInvestmentStorage_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">SI5_DiscountingCapitalInvestmentStorage_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">SI6_SI7_SI8_SalvageValueStorageAtEndOfPeriod_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">SI6_SI7_SI8_SalvageValueStorageAtEndOfPeriod_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">SI9_SalvageValueDiscountedToStartYear_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">SI9_SalvageValueStorageDiscountedToStartYear_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">SI10_TotalDiscountedCostByStorage_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">SI10_TotalDiscountedCostByStorage_rule</span><span class="p">)</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Capital Costs&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Calculates the total discounted capital cost expenditure for each technology in each year.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">CC1_UndiscountedCapitalInvestment_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">CC1_UndiscountedCapitalInvestment_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">CC2_DiscountedCapitalInvestment_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">CC2_DiscountedCapitalInvestment_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Salvage Value&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Calculates the fraction of the initial capital cost that can be recouped at the end of a technologies operational life. </span>
<span class="sd">The salvage value can be calculated using one of two depreciation methods: straight line and sinking fund.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">SV1_SV2_SV3_SalvageValueAtEndOfPeriod_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">SV1_SV2_SV3_SalvageValueAtEndOfPeriod_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">SV4_SalvageValueDiscountedToStartYear_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">SV4_SalvageValueDiscountedToStartYear_rule</span><span class="p">)</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Operating Costs&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Calculates the total variable and fixed operating costs for each technology, in each year.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">OC1_OperatingCostsVariable_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">OC1_OperatingCostsVariable_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">OC2_OperatingCostsFixedAnnual_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">OC2_OperatingCostsFixedAnnual_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">OC3_OperatingCostsTotalAnnual_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">OC3_OperatingCostsTotalAnnual_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">OC4_DiscountedOperatingCostsTotalAnnual_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">OC4_DiscountedOperatingCostsTotalAnnual_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Total Discounted Costs&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Calculates the total discounted system cost over the entire model period to give the TotalDiscountedCost. This is the variable that is minimized in the model’s objective function.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">TDC1_TotalDiscountedCostByTechnology_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">TDC1_TotalDiscountedCostByTechnology_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">TDC2_TotalDiscountedCost_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">TDC2_TotalDiscountedCost_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Total Capacity Constraints&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Ensures that the total capacity of each technology in each year is greater than and less </span>
<span class="sd">than the user-defined parameters TotalAnnualMinCapacityInvestment and TotalAnnualMaxCapacityInvestment respectively.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">TCC1_TotalAnnualMaxCapacityConstraint_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">TCC1_TotalAnnualMaxCapacityConstraint_rule</span><span class="p">)</span>
        
<span class="n">model</span><span class="o">.</span><span class="n">TCC2_TotalAnnualMinCapacityConstraint_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">TCC2_TotalAnnualMinCapacityConstraint_rule</span><span class="p">)</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;New Capacity Constraints&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Ensures that the new capacity of each technology installed in each year is greater than and less than the </span>
<span class="sd">user-defined parameters TotalAnnualMinCapacityInvestment and TotalAnnualMaxCapacityInvestment respectively.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">NCC1_TotalAnnualMaxNewCapacityConstraint_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">NCC1_TotalAnnualMaxNewCapacityConstraint_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">NCC2_TotalAnnualMinNewCapacityConstraint_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">NCC2_TotalAnnualMinNewCapacityConstraint_rule</span><span class="p">)</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Annual Activity Constraints&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Ensures that the total activity of each technology over each year is greater than and less than the user-defined parameters </span>
<span class="sd">TotalTechnologyAnnualActivityLowerLimit and TotalTechnologyAnnualActivityUpperLimit respectively.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">AAC1_TotalAnnualTechnologyActivity_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">AAC1_TotalAnnualTechnologyActivity_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">AAC2_TotalAnnualTechnologyActivityUpperLimit_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">AAC2_TotalAnnualTechnologyActivityUpperLimit_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">AAC3_TotalAnnualTechnologyActivityLowerLimit_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">AAC3_TotalAnnualTechnologyActivityLowerLimit_rule</span><span class="p">)</span>    

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Total Activity Constraints&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Ensures that the total activity of each technology over the entire model period is greater than and less than the</span>
<span class="sd">user-defined parameters TotalTechnologyModelPeriodActivityLowerLimit and TotalTechnologyModelPeriodActivityUpperLimit respectively.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">TAC1_TotalModelHorizonTechnologyActivity_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">TAC1_TotalModelHorizonTechnologyActivity_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">TAC2_TotalModelHorizonTechnologyActivityUpperLimit_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">TAC2_TotalModelHorizonTechnologyActivityUpperLimit_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">TAC3_TotalModelHorizonTechnologyActivityLowerLimit_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">TAC3_TotalModelHorizenTechnologyActivityLowerLimit_rule</span><span class="p">)</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Reserve Margin Constraints&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Ensures that sufficient reserve capacity of specific technologies </span>
<span class="sd">(ReserveMarginTagTechnology = 1) is installed such that the user-defined ReserveMargin is maintained.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">RM1_ReserveMargin_TechnologiesIncluded_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">RM1_ReserveMargin_TechnologiesIncluded_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">RM2_ReserveMargin_FuelsIncluded_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">RM2_ReserveMargin_FuelsIncluded_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">RM3_ReserveMargin_Constraint_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TIMESLICE</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">RM3_ReserveMargin_Constraint_rule</span><span class="p">)</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;RE Production Target&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Ensures that production from technologies tagged as renewable energy technologies </span>
<span class="sd">(RETagTechnology = 1) is at least equal to the user-defined renewable energy (RE) target.</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">RE1_FuelProductionByTechnologyAnnual_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">RE1_FuelProductionByTechnologyAnnual_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">RE2_TechIncluded_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">RE2_TechIncluded_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">RE3_FuelIncluded_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">RE3_FuelIncluded_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">RE4_EnergyConstraint_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">RE4_EnergyConstraint_rule</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">RE5_FuelUseByTechnologyAnnual_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">RE5_FuelUseByTechnologyAnnual_rule</span><span class="p">)</span>

<span class="c1">##################################################################################################</span>
<span class="s1">&#39;Emissions Accounting&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Calculates the annual and model period emissions from each technology, for each type of emission. </span>
<span class="sd">It also calculates the total associated emission penalties, if any. Finally, it ensures that emissions are maintained before </span>
<span class="sd">stipulated limits that may be defined for each year and/or the entire model period.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">model</span><span class="o">.</span><span class="n">E1_AnnualEmissionProductionByMode_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">MODE_OF_OPERATION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">E1_AnnualEmissionProductionByMode_rule</span><span class="p">)</span> 
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">E2_AnnualEmissionProduction</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">E2_AnnualEmissionProduction_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">E3_EmissionPenaltyByTechAndEmission</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">E3_EmissionPenaltyByTechAndEmission_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">E4_EmissionsPenaltyByTechnology</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">E4_EmissionsPenaltyByTechnology_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">E5_DiscountedEmissionsPenaltyByTechnology_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">TECHNOLOGY</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span> <span class="o">=</span> <span class="n">E5_DiscountedEmissionsPenaltyByTechnology_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">E6_EmissionsAccounting1</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">E6_EmissionsAccounting1_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">E7_EmissionsAccounting2</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">E7_EmissionsAccounting2_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">E8_AnnualEmissionsLimit_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">E8_AnnualEmissionsLimit_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>

<span class="n">model</span><span class="o">.</span><span class="n">E9_ModelPeriodEmissionsLimit_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">REGION</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">EMISSION</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span> <span class="n">E9_ModelPeriodEmissionsLimit_rule</span><span class="p">)</span>
<span class="c1"># 31-Oct-2022: Added equation from documentation &amp; go-by.</span>
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="solving-the-model">
<h1>Solving the Model<a class="headerlink" href="#solving-the-model" title="Permalink to this headline">#</a></h1>
<p>The next cell solves an instance of the model using the solver of the user’s choice. You may change the <code class="docutils literal notranslate"><span class="pre">SolverFactory</span></code> to the available solver of your choice</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">instance</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">create_instance</span><span class="p">()</span>
<span class="n">opt</span> <span class="o">=</span> <span class="n">SolverFactory</span><span class="p">(</span><span class="s1">&#39;cbc&#39;</span><span class="p">)</span> <span class="c1"># Choose solver to be used</span>
<span class="n">final_result</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">tee</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Welcome to the CBC MILP Solver 
Version: 2.10.8 
Build Date: Feb  3 2023 

command line - /content/bin/cbc -printingOptions all -import /tmp/tmp96ig2y4_.pyomo.lp -stat=1 -solve -solu /tmp/tmp96ig2y4_.pyomo.soln (default strategy 1)
Option for printingOptions changed from normal to all
Presolve 589 (-9164) rows, 644 (-8684) columns and 2867 (-19026) elements
Statistics for presolved model


Problem has 589 rows, 644 columns (487 with objective) and 2867 elements
Column breakdown:
459 of type 0.0-&gt;inf, 102 of type 0.0-&gt;up, 49 of type lo-&gt;inf, 
0 of type lo-&gt;up, 34 of type free, 0 of type fixed, 
0 of type -inf-&gt;0.0, 0 of type -inf-&gt;up, 0 of type 0.0-&gt;1.0 
Row breakdown:
154 of type E 0.0, 0 of type E 1.0, 0 of type E -1.0, 
3 of type E other, 0 of type G 0.0, 0 of type G 1.0, 
0 of type G other, 378 of type L 0.0, 0 of type L 1.0, 
49 of type L other, 0 of type Range 0.0-&gt;1.0, 5 of type Range other, 
0 of type Free 
Presolve 589 (-9164) rows, 644 (-8684) columns and 2867 (-19026) elements
Perturbing problem by 0.001% of 0.081638595 - largest nonzero change 9.994161e-05 ( 12241.956%) - largest zero change 9.5524214e-05
0  Obj 143712.3 Primal inf 471620.2 (138)
50  Obj 144585.37 Primal inf 465427.95 (248)
130  Obj 145167.81 Primal inf 102434.43 (79)
205  Obj 145172.6
Optimal - objective value 145145.22
After Postsolve, objective 145145.22, infeasibilities - dual 0 (0), primal 0 (0)
Optimal objective 145145.2199 - 205 iterations time 0.022, Presolve 0.02
Total time (CPU seconds):       0.12   (Wallclock seconds):       0.15

# ==========================================================
# = Solver Results                                         =
# ==========================================================
# ----------------------------------------------------------
#   Problem Information
# ----------------------------------------------------------
Problem: 
- Name: unknown
  Lower bound: 145145.2199
  Upper bound: 145145.2199
  Number of objectives: 1
  Number of constraints: 9753
  Number of variables: 9328
  Number of nonzeros: 487
  Sense: minimize
# ----------------------------------------------------------
#   Solver Information
# ----------------------------------------------------------
Solver: 
- Status: ok
  User time: -1.0
  System time: 0.12
  Wallclock time: 0.15
  Termination condition: optimal
  Termination message: Model was solved to optimality (subject to tolerances), and an optimal solution is available.
  Statistics: 
    Branch and bound: 
      Number of bounded subproblems: None
      Number of created subproblems: None
    Black box: 
      Number of iterations: 205
  Error rc: 0
  Time: 0.1840047836303711
# ----------------------------------------------------------
#   Solution Information
# ----------------------------------------------------------
Solution: 
- number of solutions: 0
  number of solutions displayed: 0
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="visualizing-results">
<h1>Visualizing Results<a class="headerlink" href="#visualizing-results" title="Permalink to this headline">#</a></h1>
<p>The next cell will produce graphs for some of the key variables to illustrate the model results</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pandas.core</span> <span class="kn">import</span> <span class="n">series</span>
<span class="k">def</span> <span class="nf">Visualizer</span><span class="p">(</span><span class="n">instance</span><span class="p">):</span>
    <span class="c1">#print([key[1] for key in instance.TotalCapacityAnnual])</span>
    <span class="c1">#print([value(instance.TotalCapacityAnnual[key]) for key in instance.TotalCapacityAnnual])</span>
    <span class="c1">#instance.RateOfActivity.pprint()</span>

    <span class="n">bar_colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;chocolate&#39;</span><span class="p">,</span><span class="s1">&#39;darkturquoise&#39;</span><span class="p">,</span> <span class="s1">&#39;grey&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;lightcoral&#39;</span><span class="p">]</span>
    <span class="n">var_bars</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">TotalCapacityAnnual</span><span class="p">]</span>
    <span class="n">var_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">TotalCapacityAnnual</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">TotalCapacityAnnual</span><span class="p">]</span>

    <span class="n">dem_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">Demand</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">Demand</span> <span class="k">if</span> <span class="n">key</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;demHEAT&#39;</span><span class="p">]</span>
    <span class="n">gas_stor_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">StorageLevelSeasonStart</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">StorageLevelSeasonStart</span> <span class="k">if</span> <span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;storGAS&#39;</span><span class="p">]</span>

    <span class="n">x_seasons</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">StorageLevelSeasonStart</span><span class="p">]</span>
    <span class="n">x_timeslices</span> <span class="o">=</span> <span class="n">Process_Data</span><span class="p">(</span><span class="n">TIMESLICE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">)</span>

    <span class="n">rate_act</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">RateOfActivity</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">rate_act</span><span class="p">[(</span><span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">k</span><span class="p">[</span><span class="mi">2</span><span class="p">])]</span>  <span class="o">=</span> <span class="n">value</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">RateOfActivity</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>  <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">x_timeslices</span><span class="p">)</span>
       



    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Technologies&quot;</span> <span class="p">:</span> <span class="n">var_bars</span><span class="p">,</span> <span class="s2">&quot;Capacity&quot;</span> <span class="p">:</span> <span class="n">var_values</span><span class="p">,</span> <span class="s2">&quot;Color&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;grey&#39;</span><span class="p">,</span> <span class="s1">&#39;pink&#39;</span><span class="p">]})</span>
    
    <span class="n">my_figure</span> <span class="o">=</span> <span class="n">make_subplots</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">subplot_titles</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Total Capacities&quot;</span><span class="p">,</span> <span class="s2">&quot;Heat Demand Over the Year&quot;</span><span class="p">,</span> <span class="s2">&quot;Energy Generated by Technology&quot;</span><span class="p">,</span> <span class="s2">&quot;Gas Storage Level at Start of Each Month&quot;</span><span class="p">),</span> <span class="n">shared_xaxes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
    <span class="n">my_figure</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Bar</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">var_values</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">var_bars</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">bar_colors</span><span class="p">,</span> <span class="n">coloraxis</span><span class="o">=</span><span class="s2">&quot;coloraxis&quot;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Annual Capacities&quot;</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s2">&quot;y1&quot;</span><span class="p">),</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">my_figure</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x_timeslices</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">dem_values</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Heat Demand&quot;</span><span class="p">,</span><span class="n">xaxis</span><span class="o">=</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s2">&quot;y2&quot;</span><span class="p">),</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>


    <span class="n">techs</span> <span class="o">=</span> <span class="n">Process_Data</span><span class="p">(</span><span class="n">TECHNOLOGY_df</span><span class="p">,</span><span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">)</span> <span class="c1"># Getting list of technologies in the model</span>
    <span class="n">no_change_techs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;distGAS&quot;</span><span class="p">,</span> <span class="s2">&quot;tCOMP&quot;</span><span class="p">,</span> <span class="s1">&#39;tEXTRACT1&#39;</span><span class="p">]</span> <span class="c1"># list of technologies not to be changed by students</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">no_change_techs</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">techs</span><span class="p">:</span>
        <span class="n">techs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">techs</span><span class="p">:</span>
      <span class="n">rates_y</span> <span class="o">=</span> <span class="p">[]</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">rate_act</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> 
        <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="n">k</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
          <span class="n">rates_y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">(</span><span class="n">rate_act</span><span class="p">[</span><span class="n">k</span><span class="p">]))</span>
      <span class="n">my_figure</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x_timeslices</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">rates_y</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="s2">&quot;Energy Generated by &quot;</span><span class="o">+</span><span class="n">t</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">xaxis</span><span class="o">=</span><span class="s2">&quot;x3&quot;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s2">&quot;y3&quot;</span><span class="p">),</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="n">my_figure</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x_seasons</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">gas_stor_values</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Gas Storage&quot;</span><span class="p">,</span><span class="n">xaxis</span><span class="o">=</span><span class="s2">&quot;x4&quot;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s2">&quot;y4&quot;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;teal&#39;</span><span class="p">)),</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Set axes titles</span>
    <span class="n">my_figure</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span><span class="n">title_text</span><span class="o">=</span><span class="s2">&quot;Technologies&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">my_figure</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span><span class="n">title_text</span><span class="o">=</span><span class="s2">&quot;Timeslices (Weeks)&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">my_figure</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span><span class="n">title_text</span><span class="o">=</span><span class="s2">&quot;Timeslices (Weeks)&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">my_figure</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span><span class="n">title_text</span><span class="o">=</span><span class="s2">&quot;Months&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">my_figure</span><span class="o">.</span><span class="n">update_yaxes</span><span class="p">(</span><span class="n">title_text</span><span class="o">=</span><span class="s2">&quot;Total Capacity (GW)&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">my_figure</span><span class="o">.</span><span class="n">update_yaxes</span><span class="p">(</span><span class="n">title_text</span><span class="o">=</span><span class="s2">&quot;Total Demand (GWh / Week)&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">my_figure</span><span class="o">.</span><span class="n">update_yaxes</span><span class="p">(</span><span class="n">title_text</span><span class="o">=</span><span class="s2">&quot;Energy Generated (MWh / Week)&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">my_figure</span><span class="o">.</span><span class="n">update_yaxes</span><span class="p">(</span><span class="n">title_text</span><span class="o">=</span><span class="s2">&quot;Storage Levels (GWh)&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">my_figure</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">title_text</span><span class="o">=</span><span class="s2">&quot;OSeMOSYS Results&quot;</span><span class="p">,</span> <span class="n">showlegend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    
    <span class="n">my_figure</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>



<span class="n">Visualizer</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><html>
<head><meta charset="utf-8" /></head>
<body>
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.18.2.min.js"></script>                <div id="56c10ab8-f801-4066-9d89-a0fba92054ea" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("56c10ab8-f801-4066-9d89-a0fba92054ea")) {                    Plotly.newPlot(                        "56c10ab8-f801-4066-9d89-a0fba92054ea",                        [{"marker":{"color":["chocolate","darkturquoise","grey","green","brown","lightcoral"],"coloraxis":"coloraxis"},"name":"Annual Capacities","x":["tFURN","distGAS","pN_GAS","pRN_GAS","tCOMP","tEXTRACT1"],"xaxis":"x","y":[13.209393,26.418787,0.0,24.559687,0.0,1.8590998],"yaxis":"y","type":"bar"},{"name":"Heat Demand","x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],"xaxis":"x2","y":[2410.7143,2321.4286,2053.5714,2142.8571,1988.8393,1915.1786,1694.1964,1767.8571,1627.2321,1566.9643,1386.1607,1446.4286,1386.1607,1334.8214,1180.8036,1232.1429,1024.5536,986.60714,872.76786,910.71429,723.21429,696.42857,616.07143,642.85714,482.14286,464.28571,410.71429,428.57143,421.875,406.25,359.375,375.0,421.875,406.25,359.375,375.0,662.94643,638.39286,564.73214,589.28571,904.01786,870.53571,770.08929,803.57143,1446.4286,1392.8571,1232.1429,1285.7143],"yaxis":"y2","type":"scatter"},{"name":"Energy Generated by tFURN","x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],"xaxis":"x3","y":[2410.714375,2321.4285416666667,2053.5714375000002,2142.8570833333333,1988.8392916666664,1915.1785625,1694.1964375,1767.8571458333333,1627.2321458333333,1566.9642916666664,1386.1607083333336,1446.4285625,1386.1607083333336,1334.8214375,1180.8035625,1232.1428541666667,1024.5535625,986.6071458333332,872.7678541666668,910.7142916666667,723.2142916666667,696.4285625000001,616.0714375,642.8571458333333,482.14285416666667,464.28570833333333,410.71429166666667,428.5714375,421.875,406.25,359.375,375.0,421.875,406.25,359.375,375.0,662.9464375,638.3928541666667,564.7321458333333,589.2857083333333,904.0178541666668,870.5357083333333,770.0892916666667,803.5714374999999,1446.4285625,1392.8571458333333,1232.1428541666667,1285.7142916666667],"yaxis":"y3","type":"scatter"},{"name":"Energy Generated by pN_GAS","x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],"xaxis":"x3","y":[-0.0,-0.0,-0.0,-0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],"yaxis":"y3","type":"scatter"},{"name":"Energy Generated by pRN_GAS","x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],"xaxis":"x3","y":[4482.142916666667,4482.142916666667,4107.142916666667,4285.7143750000005,3977.6785416666667,3830.357083333334,3388.392916666666,3535.714375,3254.464375,3133.9285416666667,2772.3214583333333,2892.857083333334,2772.3214583333333,2669.6429166666667,2361.6070833333333,2464.285625,2049.107145833333,1973.2142916666664,1745.5357083333336,1821.4285625,1446.4285625,1392.8571458333333,1232.1428541666667,1285.7142916666667,964.2857083333333,928.5714374999999,821.4285625000001,857.1428541666668,843.75,812.5,718.75,750.0,843.75,812.5,718.75,750.0,1325.8928541666667,1276.7857083333333,1129.4642916666667,1178.5714375,1808.0357083333336,1741.0714375,1540.1785625,1607.1428541666667,2892.857083333334,2785.714375,2464.285625,2571.4285416666667],"yaxis":"y3","type":"scatter"},{"marker":{"color":"teal"},"name":"Gas Storage","x":[1,2,3,4,5,6,7,8,9,10,11,12],"xaxis":"x4","y":[1500.0,1000.0,1000.0,1000.0,1000.0,1000.0,1000.0,1000.0,1000.0,1000.0,1000.0,1000.0],"yaxis":"y4","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,0.45],"title":{"text":"Technologies"}},"yaxis":{"anchor":"x","domain":[0.625,1.0],"title":{"text":"Total Capacity (GW)"}},"xaxis2":{"anchor":"y2","domain":[0.55,1.0],"title":{"text":"Timeslices (Weeks)"}},"yaxis2":{"anchor":"x2","domain":[0.625,1.0],"title":{"text":"Total Demand (GWh / Week)"}},"xaxis3":{"anchor":"y3","domain":[0.0,0.45],"title":{"text":"Timeslices (Weeks)"}},"yaxis3":{"anchor":"x3","domain":[0.0,0.375],"title":{"text":"Energy Generated (MWh / Week)"}},"xaxis4":{"anchor":"y4","domain":[0.55,1.0],"title":{"text":"Months"}},"yaxis4":{"anchor":"x4","domain":[0.0,0.375],"title":{"text":"Storage Levels (GWh)"}},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Total Capacities","x":0.225,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Heat Demand Over the Year","x":0.775,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Energy Generated by Technology","x":0.225,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Gas Storage Level at Start of Each Month","x":0.775,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"}],"title":{"text":"OSeMOSYS Results"},"showlegend":true},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('56c10ab8-f801-4066-9d89-a0fba92054ea');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                            </script>        </div>
</body>
</html></div></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="exercise">
<h1>Exercise<a class="headerlink" href="#exercise" title="Permalink to this headline">#</a></h1>
<section id="for-the-instructor">
<h2>For the Instructor<a class="headerlink" href="#for-the-instructor" title="Permalink to this headline">#</a></h2>
<p>Choose what the students can change in the model</p>
<ul class="simple">
<li><p>Variable costs, minimum storage charge, capital costs</p></li>
<li><p>Which technologies will be affected</p></li>
</ul>
<p>Change the flags to <code class="docutils literal notranslate"><span class="pre">False</span></code> to turn the option off, or leave them as <code class="docutils literal notranslate"><span class="pre">True</span></code> to have students access that parameter</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">VOM_FLAG</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Variable cost flag</span>
<span class="n">CC_FLAG</span>  <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Capital Cost flag</span>
<span class="n">SMC_FLAG</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># Minimum storage charge flag</span>
<span class="n">Stor_Levels</span> <span class="o">=</span> <span class="kc">True</span> <span class="c1"># Change storage level Start and Finish</span>

<span class="c1">#------------------------------------------------------------------------------------------------#</span>

<span class="n">technologies</span> <span class="o">=</span> <span class="n">Process_Data</span><span class="p">(</span><span class="n">TECHNOLOGY_df</span><span class="p">,</span><span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">)</span> <span class="c1"># Getting list of technologies in the model</span>
<span class="n">storage_units</span> <span class="o">=</span> <span class="n">Process_Data</span><span class="p">(</span><span class="n">STORAGE_df</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="s2">&quot;set&quot;</span><span class="p">)</span> <span class="c1"># Getting list of storage facilities in the model</span>

<span class="n">no_change_techs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;distGAS&quot;</span><span class="p">,</span> <span class="s2">&quot;tCOMP&quot;</span><span class="p">,</span> <span class="s1">&#39;tEXTRACT1&#39;</span><span class="p">]</span> <span class="c1"># list of technologies not to be changed by students</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">no_change_techs</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">technologies</span><span class="p">:</span>
        <span class="n">technologies</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="c1"># Creating a dictionary for the instructor to turn on / off which units the students have the liberty to change</span>
<span class="n">instructionary</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">technologies</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">technologies</span><span class="p">)),</span> <span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span> <span class="c1"># Dictionary of technologies for which the students should have access (default = True for all)</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">storage_units</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">storage_units</span><span class="p">)),</span> <span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]):</span>
    <span class="n">instructionary</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span> 
</pre></div>
</div>
</div>
</div>
</section>
<section id="for-the-students">
<h2>For the Students<a class="headerlink" href="#for-the-students" title="Permalink to this headline">#</a></h2>
<p>Set new values for:</p>
<ul class="simple">
<li><p>Variable costs (VOM)</p></li>
<li><p>Capital costs</p></li>
<li><p>Minimum storage charge</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Change Variable Costs (VOM)</span>
<span class="k">if</span> <span class="n">VOM_FLAG</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">VariableCost</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">VariableCost</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">instructionary</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="n">k</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">VariableCost</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Set a value for Variable Cost for &quot;</span> <span class="o">+</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;----&quot;</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">VariableCost</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;###&quot;</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>

<span class="c1"># Change Capital Costs</span>
<span class="k">if</span> <span class="n">CC_FLAG</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">CapitalCost</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">CapitalCost</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">instructionary</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">CapitalCost</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Set a value for Capital Cost for &quot;</span> <span class="o">+</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;----&quot;</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">CapitalCost</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;###&quot;</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>

<span class="k">if</span> <span class="n">SMC_FLAG</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">storage_switch</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Would you like to turn storage off? &quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">storage_switch</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Yes&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">MinStorageCharge</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">instructionary</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">instance</span><span class="o">.</span><span class="n">MinStorageCharge</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Storage for &quot;</span> <span class="o">+</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span>  <span class="s2">&quot; is turned off&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">MinStorageCharge</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">instructionary</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">instance</span><span class="o">.</span><span class="n">MinStorageCharge</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;----&quot;</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
    <span class="c1">#instance.MinStorageCharge.pprint()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;###&quot;</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>

<span class="k">if</span> <span class="n">Stor_Levels</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
  <span class="n">instance</span><span class="o">.</span><span class="n">StorageLevelStart</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>
  <span class="n">start_level</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Set a new storage level for the START of the year (in GWh): &quot;</span><span class="p">))</span>
  <span class="n">instance</span><span class="o">.</span><span class="n">StorageLevelFinish</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>
  <span class="n">finish_level</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Set a new storage level for the END of the year (in GWh): &quot;</span><span class="p">))</span>
  <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">StorageLevelStart</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">instructionary</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
      <span class="n">instance</span><span class="o">.</span><span class="n">StorageLevelStart</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">start_level</span>
  <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">StorageLevelFinish</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">j</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">instructionary</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
      <span class="n">instance</span><span class="o">.</span><span class="n">StorageLevelFinish</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">finish_level</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;----&quot;</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
  <span class="n">instance</span><span class="o">.</span><span class="n">StorageLevelStart</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>
  <span class="n">instance</span><span class="o">.</span><span class="n">StorageLevelFinish</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>


<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;###&quot;</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>############################################################################################################################################################################################################################################################################################################
############################################################################################################################################################################################################################################################################################################
############################################################################################################################################################################################################################################################################################################
StorageLevelStart : Size=1, Index=StorageLevelStart_index, Domain=Any, Default=1e-07, Mutable=True
    Key               : Value
    (&#39;BC&#39;, &#39;storGAS&#39;) : 15000.0
Set a new storage level for the START of the year (in GWh): 1500
StorageLevelFinish : Size=1, Index=StorageLevelFinish_index, Domain=Any, Default=1e-07, Mutable=True
    Key               : Value
    (&#39;BC&#39;, &#39;storGAS&#39;) : 1000.0
Set a new storage level for the END of the year (in GWh): 1000
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
StorageLevelStart : Size=1, Index=StorageLevelStart_index, Domain=Any, Default=1e-07, Mutable=True
    Key               : Value
    (&#39;BC&#39;, &#39;storGAS&#39;) : 1500.0
StorageLevelFinish : Size=1, Index=StorageLevelFinish_index, Domain=Any, Default=1e-07, Mutable=True
    Key               : Value
    (&#39;BC&#39;, &#39;storGAS&#39;) : 1000.0
############################################################################################################################################################################################################################################################################################################
</pre></div>
</div>
</div>
</div>
</section>
</section>
<hr class="docutils" />
<section class="tex2jax_ignore mathjax_ignore" id="solve-the-model-again-with-altered-values">
<h1>Solve the model again with altered values<a class="headerlink" href="#solve-the-model-again-with-altered-values" title="Permalink to this headline">#</a></h1>
<hr class="docutils" />
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">changed_results</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">tee</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Welcome to the CBC MILP Solver 
Version: 2.10.8 
Build Date: Feb  3 2023 

command line - /content/bin/cbc -printingOptions all -import /tmp/tmpvrg9pd0p.pyomo.lp -stat=1 -solve -solu /tmp/tmpvrg9pd0p.pyomo.soln (default strategy 1)
Option for printingOptions changed from normal to all
Presolve 589 (-9164) rows, 644 (-8684) columns and 2867 (-19026) elements
Statistics for presolved model


Problem has 589 rows, 644 columns (487 with objective) and 2867 elements
Column breakdown:
458 of type 0.0-&gt;inf, 102 of type 0.0-&gt;up, 50 of type lo-&gt;inf, 
0 of type lo-&gt;up, 34 of type free, 0 of type fixed, 
0 of type -inf-&gt;0.0, 0 of type -inf-&gt;up, 0 of type 0.0-&gt;1.0 
Row breakdown:
154 of type E 0.0, 0 of type E 1.0, 0 of type E -1.0, 
3 of type E other, 0 of type G 0.0, 0 of type G 1.0, 
0 of type G other, 378 of type L 0.0, 0 of type L 1.0, 
49 of type L other, 0 of type Range 0.0-&gt;1.0, 5 of type Range other, 
0 of type Free 
Presolve 589 (-9164) rows, 644 (-8684) columns and 2867 (-19026) elements
Perturbing problem by 0.001% of 0.081638595 - largest nonzero change 9.994161e-05 ( 12241.956%) - largest zero change 9.5524214e-05
0  Obj 143712.34 Primal inf 477579.72 (139)
50  Obj 144585.45 Primal inf 473393.02 (248)
136  Obj 145195.67 Primal inf 108635.09 (91)
222  Obj 145204.62 Primal inf 9650.1726 (51)
276  Obj 145206.78
Optimal - objective value 145174.22
After Postsolve, objective 145174.22, infeasibilities - dual 0 (0), primal 0 (0)
Optimal objective 145174.2205 - 276 iterations time 0.032, Presolve 0.02
Total time (CPU seconds):       0.15   (Wallclock seconds):       0.16

# ==========================================================
# = Solver Results                                         =
# ==========================================================
# ----------------------------------------------------------
#   Problem Information
# ----------------------------------------------------------
Problem: 
- Name: unknown
  Lower bound: 145174.2205
  Upper bound: 145174.2205
  Number of objectives: 1
  Number of constraints: 9753
  Number of variables: 9328
  Number of nonzeros: 487
  Sense: minimize
# ----------------------------------------------------------
#   Solver Information
# ----------------------------------------------------------
Solver: 
- Status: ok
  User time: -1.0
  System time: 0.15
  Wallclock time: 0.16
  Termination condition: optimal
  Termination message: Model was solved to optimality (subject to tolerances), and an optimal solution is available.
  Statistics: 
    Branch and bound: 
      Number of bounded subproblems: None
      Number of created subproblems: None
    Black box: 
      Number of iterations: 276
  Error rc: 0
  Time: 0.1830580234527588
# ----------------------------------------------------------
#   Solution Information
# ----------------------------------------------------------
Solution: 
- number of solutions: 0
  number of solutions displayed: 0
</pre></div>
</div>
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "IESVIC2060/The_OSeMOSYS_EBook_by_IESVic",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Book_Files\_build\jupyter_execute"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">IESVic OSeMOSYS Notebook</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#table-of-contents">Table of Contents</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#important-information-for-exercises">Important Information for Exercises</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#initializations">Initializations</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#solving-the-model">Solving the Model</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-results">Visualizing Results</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise">Exercise</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#for-the-instructor">For the Instructor</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#for-the-students">For the Students</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#solve-the-model-again-with-altered-values">Solve the model again with altered values</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Cristiano Curi Fernandes
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>